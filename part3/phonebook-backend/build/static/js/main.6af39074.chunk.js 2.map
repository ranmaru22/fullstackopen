{"version":3,"sources":["filter.js","personform.js","persons.js","notification.js","services/personService.js","app.js","index.js"],"names":["Filter","value","handlerFunction","onChange","PersonForm","formFields","onSubmit","map","field","key","label","type","Persons","persons","filterVal","deleteFunction","filter","val","name","toUpperCase","includes","number","onClick","Notification","message","isError","className","baseUri","getAll","a","axios","get","res","data","createEntry","dataObj","post","deleteEntry","id","delete","updateEntry","patchData","patch","App","useState","Array","setPersons","newName","setNewName","newNumber","setNewNumber","setFilterVal","notification","setNotification","errorMsg","setErrorMsg","useEffect","fetchData","personService","error","showError","showNotification","timeout","setTimeout","isAlreadyInPhonebook","find","p","addOrUpdate","e","preventDefault","found","newPerson","addedPerson","concat","window","confirm","updatedPerson","deleteFromPhonebook","entry","console","target","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6af39074.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ value, handlerFunction }) => (\n    <div>\n        <label>Filter: </label>\n        <input value={value} onChange={handlerFunction} />\n    </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({ formFields, handlerFunction }) => (\n    <form onSubmit={handlerFunction}>\n        {formFields.map(field => (\n            <div key={field.label}>\n                <label>{field.label}</label>\n                <input value={field.value} onChange={field.handlerFunction}/>\n            </div>\n        ))}\n        <div>\n            <button type=\"submit\">add</button>\n        </div>\n    </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, filterVal, deleteFunction }) => (\n    <ul>\n        {\n            persons\n                .filter(val => val.name.toUpperCase().includes(filterVal.toUpperCase()))\n                .map(val => (\n                    <li key={val.name}>\n                        {val.name} : {val.number}\n                        <button onClick={() => deleteFunction(val)}>delete</button>\n                    </li>\n                ))\n        }\n    </ul>\n);\n\nexport default Persons;\n","import React from \"react\";\n\nconst Notification = ({ message, isError=false }) => {\n    if (message === null) {\n        return null;\n    } else {\n        return isError\n            ? <div className=\"error\">{message}</div>\n            : <div className=\"notification\">{message}</div>;\n    }\n};\n\nexport default Notification;\n","import axios from \"axios\";\n\n// const baseUri = \"http://localhost:3888/persons\";\nconst baseUri = \"/api/persons\";\n\nconst getAll = async () => {\n    const res = await axios.get(baseUri);\n    return res.data;\n};\n\nconst createEntry = async dataObj => {\n    const res = await axios.post(baseUri, dataObj);\n    return res.data;\n};\n\nconst deleteEntry = async id => {\n    const res = await axios.delete(`${baseUri}/${id}`);\n    return res;\n};\n\nconst updateEntry = async (id, patchData) => {\n    const res = await axios.patch(`${baseUri}/${id}`, patchData);\n    return res.data;\n};\n\nexport default { getAll, createEntry, deleteEntry, updateEntry };\n","import React, { useState, useEffect } from \"react\";\n\nimport Filter from \"./filter\";\nimport PersonForm from \"./personform\";\nimport Persons from \"./persons\";\nimport Notification from \"./notification\";\n\nimport personService from \"./services/personService\";\n\nconst App = () => {\n    const [ persons, setPersons ] = useState(new Array(0));\n    const [ newName, setNewName ] = useState(\"\");\n    const [ newNumber, setNewNumber ] = useState(\"\");\n    const [ filterVal, setFilterVal ] = useState(\"\");\n    const [ notification, setNotification ] = useState(null);\n    const [ errorMsg, setErrorMsg ] = useState(null);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const persons = await personService.getAll();\n            setPersons(persons);\n        };\n        try {\n            fetchData();\n        } catch (error) {\n            showError(\"Error fetching data from the server.\", 5000);\n        }\n    }, []);\n\n    const showNotification = (message, timeout=2500) => {\n        setNotification(message);\n        setTimeout(() => setNotification(null), timeout);\n    };\n\n    const showError = (message, timeout=2500) => {\n        setErrorMsg(message);\n        setTimeout(() => setNotification(null), timeout);\n    };\n\n    const isAlreadyInPhonebook = name => persons.find(p => p.name === name);\n\n    const addOrUpdate = async e => {\n        e.preventDefault();\n        const found = isAlreadyInPhonebook(newName);\n        if (!found) {\n            try {\n                const newPerson = { name: newName, number: newNumber };\n                const addedPerson = await personService.createEntry(newPerson);\n                setPersons(persons.concat(addedPerson));\n                showNotification(`${addedPerson.name} added to phonebook.`);\n            } catch (error) {\n                showError(`Error adding entry to the phonebook`);\n            }\n        } else {\n            if (window.confirm(`${found.name} is already in the phonebook. Update the number?`)) {\n                try {\n                    const patchData = { number: newNumber };\n                    const updatedPerson = await personService.updateEntry(found.id, patchData);\n                    setPersons(persons.map(p => p.name === updatedPerson.name ? updatedPerson : p));\n                    showNotification(`Number for ${found.name} updated.`);\n                } catch (error) {\n                    showError(`Error updating entry ${found.name}`);\n                }\n            }\n        }\n        setNewName(\"\");\n        setNewNumber(\"\");\n    };\n\n    const deleteFromPhonebook = async entry => {\n        if (window.confirm(`Do you really want to delete ${entry.name} from the phonebook?`)) {\n            try {\n                await personService.deleteEntry(entry.id);\n                setPersons(persons.filter(p => p.id !== entry.id));\n                showNotification(`${entry.name} deleted from phonebook.`);\n            } catch (error) {\n                console.error(\"Error deleting entry.\");\n            }\n        }\n    };\n\n\n    const newNameHandler = e => setNewName(e.target.value);\n    const newNumberHandler = e => setNewNumber(e.target.value);\n    const setFilter = e => setFilterVal(e.target.value);\n\n    const formFields = [\n        { label: \"name\", value: newName, handlerFunction: newNameHandler },\n        { label: \"number\", value: newNumber, handlerFunction: newNumberHandler }\n    ];\n\n    return (\n        <div>\n            <h1>Phonebook</h1>\n            <Notification message={notification} />\n            <Notification message={errorMsg} isError={true} />\n            <Filter value={filterVal} handlerFunction={setFilter} />\n            <h2>Add new</h2>\n            <PersonForm formFields={formFields} handlerFunction={addOrUpdate} />\n            <h2>Numbers</h2>\n            <Persons persons={persons} filterVal={filterVal} deleteFunction={deleteFromPhonebook} />\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from \"./app.js\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}